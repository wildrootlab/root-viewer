<!DOCTYPE html> <html lang=en > <meta charset=utf-8  /> <meta name=viewport  content="width=device-width, initial-scale=1.0" /><meta name=generator  content="Docutils 0.17.1: http://docutils.sourceforge.net/" /> <meta name=viewport  content="width=device-width,initial-scale=1"> <meta http-equiv=x-ua-compatible  content="ie=edge"> <meta name="lang:clipboard.copy" content="Copy to clipboard"> <meta name="lang:clipboard.copied" content="Copied to clipboard"> <meta name="lang:search.language" content=en > <meta name="lang:search.pipeline.stopwords" content=True > <meta name="lang:search.pipeline.trimmer" content=True > <meta name="lang:search.result.none" content="No matching documents"> <meta name="lang:search.result.one" content="1 matching document"> <meta name="lang:search.result.other" content="# matching documents"> <meta name="lang:search.tokenizer" content="[\s\-]+"> <link href="https://fonts.gstatic.com/" rel=preconnect  crossorigin> <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel=stylesheet > <style> body, input { font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif } code, kbd, pre { font-family: "Roboto Mono", "Courier New", Courier, monospace } </style> <link rel=stylesheet  href="../_static/stylesheets/application.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-palette.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-fixes.css"/> <link rel=stylesheet  href="../_static/fonts/material-icons.css"/> <meta name=theme-color  content="#51DBBA"> <script src="../_static/javascripts/modernizr.js"></script> <title>Advanced Segmentations &#8212; Root Viewer</title> <link rel=stylesheet  type="text/css" href="../_static/pygments.css" /> <link rel=stylesheet  type="text/css" href="../_static/styles.css" /> <link rel=stylesheet  type="text/css" href="../_static/togglebutton.css" /> <link rel=stylesheet  type="text/css" href="../_static/copybutton.css" /> <link rel=stylesheet  type="text/css" href="../_static/mystnb.css" /> <link rel=stylesheet  type="text/css" href="../_static/sphinx-thebe.css" /> <link rel=stylesheet  type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" /> <link rel=stylesheet  type="text/css" href="../_static/styles.css" /> <link rel=stylesheet  type="text/css" href="../_static/styles.css" /> <script data-url_root="../" id=documentation_options  src="../_static/documentation_options.js"></script> <script src="../_static/jquery.js"></script> <script src="../_static/underscore.js"></script> <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script> <script src="../_static/doctools.js"></script> <script src="../_static/sphinx_highlight.js"></script> <script src="../_static/clipboard.min.js"></script> <script src="../_static/copybutton.js"></script> <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script> <script>let toggleHintShow = 'Click to show';</script> <script>let toggleHintHide = 'Click to hide';</script> <script>let toggleOpenOnPrint = 'true';</script> <script src="../_static/togglebutton.js"></script> <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script> <script src="../_static/design-tabs.js"></script> <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js" const thebe_selector = ".thebe,.cell" const thebe_selector_input = "pre" const thebe_selector_output = ".output, .cell_output" </script> <script async=async  src="../_static/sphinx-thebe.js"></script> <link rel="shortcut icon" href="../_static/favicon.ico"/> <link rel=index  title=Index  href="../genindex.html" /> <link rel=search  title=Search  href="../search.html" /> <link rel=next  title=Filtering  href=Filtering.html  /> <link rel=prev  title=Layers  href="../intro/layers.html" /> <body dir=ltr data-md-color-primary=dark-blue data-md-color-accent=#66E0F2> <svg class=md-svg > <defs data-children-count=0 > <svg xmlns="http://www.w3.org/2000/svg" width=416  height=448  viewBox="0 0 416 448" id=__github ><path fill=currentColor  d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle  data-md-toggle=drawer  type=checkbox  id=__drawer > <input class=md-toggle  data-md-toggle=search  type=checkbox  id=__search > <label class=md-overlay  data-md-component=overlay  for=__drawer ></label> <a href="#usage/Advanced" tabindex=1  class=md-skip > Skip to content </a> <header class=md-header  data-md-component=header > <nav class="md-header-nav md-grid"> <div class="md-flex navheader"> <div class="md-flex__cell md-flex__cell--shrink"> <a href="../intro.html" title="Root Viewer" class="md-header-nav__button md-logo"> <img src="../_static/logo_dark.png" height=26  alt="Root Viewer logo"> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer ></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title > <span class=md-header-nav__topic >Root Viewer</span> <span class=md-header-nav__topic > Advanced Segmentations </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search ></label> <div class=md-search  data-md-component=search  role=dialog > <label class=md-search__overlay  for=__search ></label> <div class=md-search__inner  role=search > <form class=md-search__form  action="../search.html" method=get  name=search > <input type=text  class=md-search__input  name=q  placeholder=Search  autocapitalize=off  autocomplete=off  spellcheck=false  data-md-component=query  data-md-state=active > <label class="md-icon md-search__icon" for=__search ></label> <button type=reset  class="md-icon md-search__icon" data-md-component=reset  tabindex=-1 > &#xE5CD; </button> </form> <div class=md-search__output > <div class=md-search__scrollwrap  data-md-scrollfix> <div class=md-search-result  data-md-component=result > <div class=md-search-result__meta > Type to start searching </div> <ol class=md-search-result__list ></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source > <a href="https://github.com/wildrootlab/root-viewer" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > wildrood/root-viewer </div> </a> </div> </div> <script src="../_static/javascripts/version_dropdown.js"></script> <script> var json_loc = "../"versions.json"", target_loc = "../../", text = "Versions"; $( document ).ready( add_version_dropdown(json_loc, target_loc, text)); </script> </div> </nav> </header> <div class=md-container > <main class=md-main > <div class="md-main__inner md-grid" data-md-component=container > <div class="md-sidebar md-sidebar--primary" data-md-component=navigation > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--primary" data-md-level=0 > <div class=md-nav__source > <a href="https://github.com/wildrootlab/root-viewer" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > wildrood/root-viewer </div> </a> </div> <ul class=md-nav__list > <li class=md-nav__item > <span class="md-nav__link caption"><span class=caption-text >Getting started</span></span> <li class=md-nav__item > <a href="../intro/installation.html" class=md-nav__link >Installation</a> <li class=md-nav__item > <a href="../intro/quickstart.html" class=md-nav__link >Quickstart</a> <li class=md-nav__item > <a href="../intro/layers.html" class=md-nav__link >Layers</a> <li class=md-nav__item > <span class="md-nav__link caption"><span class=caption-text >Segmentation</span></span> <li class=md-nav__item > <input class="md-toggle md-nav__toggle" data-md-toggle=toc  type=checkbox  id=__toc > <label class="md-nav__link md-nav__link--active" for=__toc > Advanced Segmentations </label> <a href="#" class="md-nav__link md-nav__link--active">Advanced Segmentations</a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >Contents</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#usage-advanced--page-root" class=md-nav__link >Advanced Segmentations</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#opening-the-plugin" class=md-nav__link >Opening the plugin</a> <li class=md-nav__item ><a href="#inputs" class=md-nav__link >Inputs</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#neural-network-prediction" class=md-nav__link ><em>Neural Network Prediction</em></a> <li class=md-nav__item ><a href="#nms-postprocessing" class=md-nav__link ><em>NMS Postprocessing</em></a> <li class=md-nav__item ><a href="#advanced-options" class=md-nav__link ><em>Advanced Options</em></a> </ul> </nav> <li class=md-nav__item ><a href="#outputs" class=md-nav__link >Outputs</a> </ul> </nav> </ul> </nav> <li class=md-nav__item > <span class="md-nav__link caption"><span class=caption-text >Image Functions</span></span> <li class=md-nav__item > <a href=Filtering.html  class=md-nav__link >Filtering</a> <li class=md-nav__item > <a href=Thresholding.html  class=md-nav__link >Thresholding</a> <li class=md-nav__item > <a href=Labeling.html  class=md-nav__link >Labeling</a> <li class=md-nav__item > <a href=Misc.html  class=md-nav__link >Misc</a> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >Contents</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#usage-advanced--page-root" class=md-nav__link >Advanced Segmentations</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#opening-the-plugin" class=md-nav__link >Opening the plugin</a> <li class=md-nav__item ><a href="#inputs" class=md-nav__link >Inputs</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#neural-network-prediction" class=md-nav__link ><em>Neural Network Prediction</em></a> <li class=md-nav__item ><a href="#nms-postprocessing" class=md-nav__link ><em>NMS Postprocessing</em></a> <li class=md-nav__item ><a href="#advanced-options" class=md-nav__link ><em>Advanced Options</em></a> </ul> </nav> <li class=md-nav__item ><a href="#outputs" class=md-nav__link >Outputs</a> </ul> </nav> </ul> </nav> </div> </div> </div> <div class=md-content > <article class="md-content__inner md-typeset" role=main > <section id=advanced-segmentations > <h1 id=usage-advanced--page-root >Advanced Segmentations<a class=headerlink  href="#usage-advanced--page-root" title="Permalink to this heading">¶</a></h1> <p>Implements a custom version of the <a class="reference external" href="https://github.com/stardist/stardist">Stardist</a> segmentation algorithm. This is a deep learning based segmentation algorithm that can be used to segment objects in 2D and 3D images, it is specifcally adept for segmenting dense clusters. The algorithm is based on:</p> <ul class=simple > <li><p>Uwe Schmidt, Martin Weigert, Coleman Broaddus, and Gene Myers.<br/> <a class="reference external" href="https://arxiv.org/abs/1806.03535"><em>Cell Detection with Star-convex Polygons</em></a>.<br/> International Conference on Medical Image Computing and Computer-Assisted Intervention (MICCAI), Granada, Spain, September 2018.</p> <li><p>Martin Weigert, Uwe Schmidt, Robert Haase, Ko Sugawara, and Gene Myers.<br/> <a class="reference external" href="http://openaccess.thecvf.com/content_WACV_2020/papers/Weigert_Star-convex_Polyhedra_for_3D_Object_Detection_and_Segmentation_in_Microscopy_WACV_2020_paper.pdf"><em>Star-convex Polyhedra for 3D Object Detection and Segmentation in Microscopy</em></a>.<br/> The IEEE Winter Conference on Applications of Computer Vision (WACV), Snowmass Village, Colorado, March 2020</p> </ul> <section id=opening-the-plugin > <h2 id=opening-the-plugin >Opening the plugin<a class=headerlink  href="#opening-the-plugin" title="Permalink to this heading">¶</a></h2> <p>To open the Stardist segmentation algorithm, select the <code class="docutils literal notranslate"><span class=pre >Advanced</span> <span class=pre >Segmentation</span></code> tab in the <code class="docutils literal notranslate"><span class=pre >Analysis</span> <span class=pre >Widget</span></code>. This will open the window shown below:</p> <img alt="../_images/advanced_segmentation.png" id=advanced-segmentation-widget  src="../_images/advanced_segmentation.png"/> <p><strong>Restore Defaults</strong>: Restore default values for <a class="reference external" href="#inputs">inputs</a> (exceptions: <em>Input Image</em>, <em>Image Axes</em>, <em>Custom Model</em>).</p> <p><strong>Run</strong>: Start the prediction with the selected inputs and create the <a class="reference external" href="#outputs">outputs</a> when done.</p> <p>All plugin activity is shown in the napari <em>activity dock</em>, which can be shown/hidden by clicking on the word <code class="docutils literal notranslate"><span class=pre >activity</span></code> next to the little arrow at the bottom right of the napari window.</p> </section> <section id=inputs > <h2 id=inputs >Inputs<a class=headerlink  href="#inputs" title="Permalink to this heading">¶</a></h2> <p>The plugin does perform input validation, i.e. it will disable the <code class="docutils literal notranslate"><span class=pre >Run</span></code> button if it detects a problem with the selected inputs. Problematic input fields are highlighted with a “lightcoral” background color <img alt="" src="https://via.placeholder.com/15/f08080/f08080.png"/>, and their <a class="reference external" href="https://en.wikipedia.org/wiki/Tooltip"><em>tooltips</em></a> typically explain what the problem is. Some error messages are shown at the bottom in napari’s status bar, such as for incompatibilities between multiple input fields. Input fields with warnings (also explained via tooltips) are highlighted with an orange background color <img alt="" src="https://via.placeholder.com/15/ffa500/ffa500.png"/>.</p> <p><strong>Input Image</strong>: Select a napari layer of type <code class="docutils literal notranslate"><span class=pre >Image</span></code> as the input.<br/> <em>Tooltip:</em> Shows the shape of the image.</p> <p><strong>Image Axes</strong>: String that describes the semantic image axes and their order, e.g. <code class="docutils literal notranslate"><span class=pre >YX</span></code> for a 2D image. This parameter is automatically chosen (i.e. guessed) when a new input image is selected and should work in most cases. Permissible axis values are: <code class="docutils literal notranslate"><span class=pre >X</span></code> (width/columns), <code class="docutils literal notranslate"><span class=pre >Y</span></code> (height/rows), <code class="docutils literal notranslate"><span class=pre >Z</span></code> (depth/planes), <code class="docutils literal notranslate"><span class=pre >C</span></code> (channels), <code class="docutils literal notranslate"><span class=pre >T</span></code> (frames/time).<br/> <em>Tooltip:</em> Shows the mapping of semantic axes to the shape of the selected input image.</p> <p><strong>Predict on field of view (only for 2D models in 2D view)</strong>: If enabled, the StarDist prediction is only applied to the current field of view of the napari viewer. As the name of this checkbox indicates, this only works for 2D StarDist models and when the napari viewer is in 2D viewing mode. The checkbox is not even shown if those conditions are not met.</p> <section id=neural-network-prediction > <h3 id=neural-network-prediction ><em>Neural Network Prediction</em><a class=headerlink  href="#neural-network-prediction" title="Permalink to this heading">¶</a></h3> <p><strong>Model Type</strong>: Choice whether to use registered pre-trained models (<code class="docutils literal notranslate"><span class=pre >2D</span></code>, <code class="docutils literal notranslate"><span class=pre >3D</span></code>) or provide a path to a model folder (<code class="docutils literal notranslate"><span class=pre >Custom</span> <span class=pre >2D/3D</span></code>). Based on this choice, either the input for <em>Pre-trained Model</em> or <em>Custom Model</em> is shown below.<br/> (Further information regarding pre-trained models: <a class="reference external" href="https://nbviewer.org/github/CSBDeep/CSBDeep/blob/master/examples/other/technical.ipynb#Registry-for-pretrained-models">how to register your own model</a>, <a class="reference external" href="https://github.com/stardist/stardist/blob/f73cdc44f718d36844b38c1f1662dbb66d157182/stardist/models/__init__.py#L17-L29">model registration in StarDist</a>.)</p> <p><strong>Pre-trained Model</strong>: Select a registered pre-trained model from a list. The first time a model is selected, it is downloaded and cached locally.</p> <p><strong>Custom Model</strong>: Provide a path to a StarDist model folder, containing at least <code class="docutils literal notranslate"><span class=pre >config.json</span></code> and a compatible neural network weights file (with suffix <code class="docutils literal notranslate"><span class=pre >.h5</span></code> or <code class="docutils literal notranslate"><span class=pre >.hdf5</span></code>). If present, <code class="docutils literal notranslate"><span class=pre >thresholds.json</span></code> is also loaded and its values can be used via the button <em>Set optimized postprocessing thresholds (for selected model)</em>.</p> <p><strong>Model Axes</strong>: A read-only text field that shows the semantic axes that the currently selected model expects as input. Additionally, we show the number of expected input channels, e.g. <code class="docutils literal notranslate"><span class=pre >YXC[2]</span></code> to indicate that the model expects a 2D input image with 2 channels. Seeing the model axes is helpful to understand whether the axes of the input image are compatible or not.</p> <p><strong>Normalize Image</strong>: A checkbox to indicate whether to perform <a class="reference external" href="https://forum.image.sc/t/normalization-in-stardist/41696/2">percentile-based input image normalization</a> or not. This should be checked if the input image wasn’t <a class="reference external" href="https://forum.image.sc/t/stardist-extension/37696/7">manually normalized</a> such that most pixel values are in the range 0 to 1. If unchecked, inputs <em>Percentile low</em> and <em>Percentile high</em> are hidden.</p> <p><strong>Percentile low</strong>: Percentile value of input pixel distribution that is mapped to 0 (~min value). If there aren’t any outlier pixels in your image, you may use percentile <code class="docutils literal notranslate"><span class=pre >0</span></code> to do a standard <a class="reference external" href="https://www.codecademy.com/article/normalization">min-max image normalization</a>.</p> <p><strong>Percentile high</strong>: Percentile value of input pixel distribution that is mapped to 1 (~max value). If there aren’t any outlier pixels in your image, you may use percentile <code class="docutils literal notranslate"><span class=pre >100</span></code> to do a standard <a class="reference external" href="https://www.codecademy.com/article/normalization">min-max image normalization</a>.</p> <p><strong>Input image scaling</strong>: Number or list of numbers (one per input axis) to scale the input image before prediction and rescale the output accordingly. For example, a value of <code class="docutils literal notranslate"><span class=pre >0.5</span></code> indicates that all spatial axes are downscaled to half their size before prediction, and that the outputs are scaled to double their size. This is useful to adapt to different object sizes in the input image.<br/> <em>Tooltip:</em> Shows the mapping of scale values to the semantic axes of the selected input image.</p> </section> <section id=nms-postprocessing > <h3 id=nms-postprocessing ><em>NMS Postprocessing</em><a class=headerlink  href="#nms-postprocessing" title="Permalink to this heading">¶</a></h3> <p><strong>Probability/Score Threshold</strong>: Determine the number of object candidates to enter non-maximum suppression. Higher values lead to fewer segmented objects, but will likely avoid false positives. The selected model may have an associated threshold value, which can be loaded via the <em>Set optimized postprocessing thresholds (for selected model)</em> button.</p> <p><strong>Overlap Threshold</strong>: Determine when two objects are considered the same during non-maximum suppression. Higher values allow segmented objects to overlap substantially. The selected model may have an associated threshold value, which can be loaded via the <em>Set optimized postprocessing thresholds (for selected model)</em> button.</p> <p><strong>Output Type</strong>: Choose format of <a class="reference external" href="#outputs">outputs</a> (see below for details). Selecting <code class="docutils literal notranslate"><span class=pre >Label</span> <span class=pre >Image</span></code> will create the outputs <em>StarDist labels</em> and <em>StarDist class labels</em> (for multi-class models only) as napari <code class="docutils literal notranslate"><span class=pre >Labels</span></code> layers. Selecting <code class="docutils literal notranslate"><span class=pre >Polygons</span> <span class=pre >/</span> <span class=pre >Polyhedra</span></code> will instead return the output <em>StarDist polygons</em> as a napari <code class="docutils literal notranslate"><span class=pre >Shapes</span></code> layer for a 2D model, or <em>StarDist polyhedra</em> as a napari <code class="docutils literal notranslate"><span class=pre >Surface</span></code> layer for a 3D model. Selecting <code class="docutils literal notranslate"><span class=pre >Both</span></code> will return both types of outputs.</p> </section> <section id=advanced-options > <h3 id=advanced-options ><em>Advanced Options</em><a class=headerlink  href="#advanced-options" title="Permalink to this heading">¶</a></h3> <p><strong>Number of Tiles</strong>: String <code class="docutils literal notranslate"><span class=pre >None</span></code> (to disable tiling) or list of integer numbers (one per axis of input image) to determine how the input image is tiled before the CNN prediction is computed on each tile individually. This is needed to avoid (GPU) memory issues that can occur for large input images. Note that the NMS postprocessing is still run only once with candidates from the predictions of all image tiles.<br/> <em>Tooltip:</em> Shows the mapping of tile values to the semantic axes of the selected input image.</p> <p><strong>Normalization Axes</strong>: String of semantic axes which are jointly normalized (if they are present in the input image). For example, the default value <code class="docutils literal notranslate"><span class=pre >ZYX</span></code> indicates that all spatial axes are always normalized together; if an image has multiple channels, the pixels will be normalized separately per channel (e.g. this is what typically makes sense for fluorescence microscopy where channels are independent). On the other hand, the channels in RGB color images typically need to be normalized jointly, hence using <code class="docutils literal notranslate"><span class=pre >ZYXC</span></code> makes sense in this case. Note: if an image is explicitly opened with <code class="docutils literal notranslate"><span class=pre >rgb=True</span></code> in napari, the channels are automatically normalized together.<br/> <em>Tooltip:</em> Shows a brief explanation.</p> <p><strong>Time-lapse Labels</strong>: If the input is a time-lapse/movie, each frame is first independently processed by StarDist. If <code class="docutils literal notranslate"><span class=pre >Separate</span> <span class=pre >per</span> <span class=pre >frame</span> <span class=pre >(no</span> <span class=pre >processing)</span></code> is chosen, the object ids in the label images of each frame are not modified, i.e. they are consecutive integers that always start at 1. Selecting <code class="docutils literal notranslate"><span class=pre >Unique</span> <span class=pre >through</span> <span class=pre >time</span></code> will cause object ids to be unique over time, i.e. the smallest object id in a given frame is larger than the largest object id of the previous frame. Finally, choosing <code class="docutils literal notranslate"><span class=pre >Match</span> <span class=pre >to</span> <span class=pre >previous</span> <span class=pre >frame</span> <span class=pre >(via</span> <span class=pre >overlap)</span></code> will perform a simple form of <a class="reference external" href="https://en.wikipedia.org/wiki/Greedy_algorithm">greedy</a> matching/tracking, where object ids are propagated from one frame to the next based on object overlap.</p> <p><strong>Show CNN Output</strong>: Create additional <a class="reference external" href="#outputs">outputs</a> (see below for details) <em>StarDist probability</em> and <em>StarDist distances</em> that show the direct results of the CNN prediction which are the inputs to the NMS postprocessing. Additionally, <em>StarDist class probabilities</em> is created for multi-class models.</p> <p><strong>Set optimized postprocessing thresholds (for selected model)</strong>: Button to set <em>Probability/Score Threshold</em> and <em>Overlap Threshold</em> to the values provided by the selected model. Nothing is changed if the model does not provide threshold values.</p> </section> </section> <section id=outputs > <h2 id=outputs >Outputs<a class=headerlink  href="#outputs" title="Permalink to this heading">¶</a></h2> <p><strong>StarDist polygons</strong>: The detected/segmented 2D objects as polygons (napari <code class="docutils literal notranslate"><span class=pre >Shapes</span></code> layer).</p> <p><strong>StarDist polyhedra</strong>: The detected/segmented 3D objects as surfaces (napari <code class="docutils literal notranslate"><span class=pre >Surface</span></code> layer).</p> <p><strong>StarDist labels</strong>: The detected/segmented 2D/3D objects as a <em>label image</em> (napari <code class="docutils literal notranslate"><span class=pre >Labels</span></code> layer). In an integer-valued label image, the value of a given pixel denotes the id of the object that it belongs to. For example, all pixels with value 5 belong to the object with id 5. All background pixels (that don’t belong to any object) have value 0.</p> <p><strong>StarDist class labels</strong> (<a class="reference external" href="https://nbviewer.org/github/stardist/stardist/blob/master/examples/other2D/multiclass.ipynb">multi-class models</a> only): The classes of detected/segmented 2D/3D objects as a <em>semantic segmentation labeling</em> (napari <code class="docutils literal notranslate"><span class=pre >Labels</span></code> layer). The integer value of a given pixel denotes the class id of the object that it belongs to. For example, all pixels with value 3 belong to the object class 3. Note that all pixels that belong to a specific object instance (as returned by <em>StarDist labels</em>) do have the same object class here. All background pixels (that don’t belong to an object class) have value 0.</p> <p><strong>StarDist probability</strong>: The object probabilities predicted by the neural network as a single-channel image (napari <code class="docutils literal notranslate"><span class=pre >Image</span></code> layer).</p> <p><strong>StarDist distances</strong>: The radial distances predicted by the neural network as a multi-channel image (napari <code class="docutils literal notranslate"><span class=pre >Image</span></code> layer).</p> <p><strong>StarDist class probabilities</strong> (<a class="reference external" href="https://nbviewer.org/github/stardist/stardist/blob/master/examples/other2D/multiclass.ipynb">multi-class models</a> only): The object class probabilities predicted by the neural network as a multi-channel image (napari <code class="docutils literal notranslate"><span class=pre >Image</span></code> layer).</p> </section> </section> <script type="text/x-thebe-config"> { requestKernel: true, binderOptions: { repo: "binder-examples/jupyter-stacks-datascience", ref: "master", }, codeMirrorConfig: { theme: "abcdef", mode: "python" }, kernelOptions: { kernelName: "python3", path: "./usage" }, predefinedOutput: true } </script> <script>kernelName = 'python3'</script> </article> </div> </div> </main> </div> <footer class=md-footer > <div class=md-footer-nav > <nav class="md-footer-nav__inner md-grid"> <a href="../intro/layers.html" title=Layers  class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev > <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis > <span class=md-footer-nav__direction > Previous </span> Layers </span> </div> </a> <a href=Filtering.html  title=Filtering  class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next > <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class=md-flex__ellipsis > <span class=md-footer-nav__direction > Next </span> Filtering </span> </div> <div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright > <div class=md-footer-copyright__highlight > &#169; Copyright 2022. </div> Created using <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.3.0. and <a href="https://github.com/bashtage/sphinx-material/">Material for Sphinx</a> </div> </div> </div> </footer> <script src="../_static/javascripts/application.js"></script> <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>